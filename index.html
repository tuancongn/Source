<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holdstation System Diagnostic</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        hs: {
                            bg: '#050505',       /* Ultra Dark */
                            card: '#111116',     /* Card BG */
                            primary: '#9333ea',  /* Purple */
                            accent: '#7e22ce',   /* Dark Purple */
                            text: '#e2e8f0',     
                            success: '#10b981',
                            warning: '#f59e0b',
                            danger: '#ef4444'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    animation: {
                        'pulse-fast': 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'grid-move': 'gridMove 20s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        gridMove: {
                            '0%': { backgroundPosition: '0 0' },
                            '100%': { backgroundPosition: '40px 40px' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #050505; color: #e2e8f0; }
        
        .glass-panel {
            background: rgba(17, 17, 22, 0.6);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(147, 51, 234, 0.1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        /* Moving Grid Background */
        .bg-grid-animated {
            background-size: 40px 40px;
            background-image: linear-gradient(to right, rgba(32, 32, 32, 0.5) 1px, transparent 1px), 
                              linear-gradient(to bottom, rgba(32, 32, 32, 0.5) 1px, transparent 1px);
            mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
            -webkit-mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
            animation: gridMove 20s linear infinite;
        }

        /* Hover Card Glow Effect */
        .card-glow {
            transition: all 0.3s ease;
        }
        .card-glow:hover {
            box-shadow: 0 0 15px rgba(147, 51, 234, 0.3);
            border-color: rgba(147, 51, 234, 0.4);
            transform: translateY(-2px);
            background: rgba(20, 20, 30, 0.8);
        }

        /* Toggle Switch CSS - Fixed Slide Effect */
        .toggle-checkbox {
            appearance: none;
            width: 44px;
            height: 24px;
            background: #374151;
            border-radius: 999px;
            position: relative;
            cursor: pointer;
            outline: none;
            transition: background 0.3s;
        }
        
        .toggle-checkbox::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        .toggle-checkbox:checked {
            background: #9333ea;
        }

        .toggle-checkbox:checked::after {
            transform: translateX(20px);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
    </style>
</head>
<body class="min-h-screen flex flex-col font-sans overflow-x-hidden relative selection:bg-hs-primary selection:text-white">

    <!-- Background Effects -->
    <div class="fixed inset-0 bg-grid-animated opacity-30 pointer-events-none z-0"></div>
    <div class="fixed top-10 left-[10%] w-64 h-64 bg-hs-primary opacity-[0.08] rounded-full blur-[80px] animate-float pointer-events-none"></div>
    <div class="fixed bottom-10 right-[10%] w-80 h-80 bg-blue-600 opacity-[0.08] rounded-full blur-[100px] animate-float pointer-events-none" style="animation-delay: 2s;"></div>

    <!-- Header -->
    <header class="p-4 border-b border-gray-800/30 sticky top-0 z-50 backdrop-blur-xl bg-black/10">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-4">
                <img src="https://raw.githubusercontent.com/tuancongn/Source/refs/heads/main/logo_hs.webp" 
                     onerror="this.onerror=null; this.src='https://holdstation.com/images/logo.svg';" 
                     alt="Holdstation Logo" 
                     class="h-8 w-auto object-contain drop-shadow-[0_0_10px_rgba(147,51,234,0.4)] transition hover:scale-105 duration-300">
                
                <div class="hidden sm:block h-5 w-px bg-gray-800"></div>
                
                <div id="status-indicator" class="flex items-center gap-2 px-3 py-1 rounded-full bg-gray-900/60 border border-gray-800 text-xs text-gray-400 backdrop-blur-sm">
                    <span class="relative flex h-2 w-2">
                      <span id="status-ping" class="animate-ping absolute inline-flex h-full w-full rounded-full bg-gray-400 opacity-75"></span>
                      <span id="status-dot" class="relative inline-flex rounded-full h-2 w-2 bg-gray-500"></span>
                    </span>
                    <span id="status-text" data-key="ready">Ready</span>
                </div>
            </div>

            <!-- Language Switcher - FIXED UI -->
            <div class="flex items-center gap-3 select-none">
                <span class="text-xs font-bold text-gray-400 cursor-pointer" onclick="forceLang('en')">EN</span>
                <input type="checkbox" id="lang-toggle" class="toggle-checkbox">
                <span class="text-xs font-bold text-gray-400 cursor-pointer" onclick="forceLang('vi')">VN</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow p-4 md:p-8 flex items-center justify-center relative z-10">
        <div class="max-w-4xl w-full mx-auto space-y-6">
            
            <div class="glass-panel rounded-2xl overflow-hidden shadow-2xl relative group border-t border-gray-700/50">
                <!-- Scanner Beam -->
                <div id="scanner" class="absolute w-full h-2 top-0 left-0 hidden shadow-[0_0_20px_#9333ea] z-20 bg-hs-primary/50"></div>
                
                <!-- Progress Bar -->
                <div id="progress-container" class="hidden absolute top-0 left-0 w-full h-[2px] bg-gray-800 z-30">
                    <div id="progress-bar" class="h-full bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 w-0 transition-all duration-300 ease-out shadow-[0_0_10px_#9333ea]"></div>
                </div>

                <div class="p-6 md:p-8 relative z-10">
                    
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-10">
                        <div class="relative">
                            <h1 class="text-3xl font-bold text-white mb-2 tracking-tight flex items-center gap-2" data-key="title">
                                System Health Check
                            </h1>
                            <p class="text-gray-400 text-sm max-w-lg leading-relaxed" data-key="desc">
                                Analyze network latency, device configuration, and connection to Trading servers.
                            </p>
                        </div>
                        <button onclick="startScan()" id="btn-scan" class="group relative w-full md:w-auto overflow-hidden rounded-xl bg-hs-primary px-8 py-3.5 font-semibold text-white shadow-[0_0_20px_rgba(147,51,234,0.3)] transition-all hover:bg-hs-accent hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] active:scale-95 border border-white/10">
                            <span class="relative z-10 flex items-center justify-center gap-2" id="btn-text" data-key="startBtn">
                                <i class="fa-solid fa-radar"></i> Start Diagnostic
                            </span>
                            <div class="absolute inset-0 -translate-x-full group-hover:animate-[shimmer_1.5s_infinite] bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>
                        </button>
                    </div>

                    <!-- Grid Stats -->
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                        <!-- Stat 1: Ping -->
                        <div class="bg-black/20 backdrop-blur-md p-4 rounded-xl border border-gray-800/60 card-glow group/card">
                            <div class="flex justify-between items-start mb-2">
                                <span class="text-[10px] font-mono text-gray-500 uppercase tracking-wider" data-key="latency">Latency</span>
                                <i class="fa-solid fa-bolt text-gray-600 group-hover/card:text-yellow-400 transition-colors"></i>
                            </div>
                            <div id="display-ping" class="text-3xl font-bold text-gray-700 font-mono tracking-tight">--</div>
                            <div id="text-ping" class="text-[10px] text-gray-500 mt-1 truncate opacity-70">Direct connection</div>
                        </div>

                        <!-- Stat 2: IP -->
                        <div class="bg-black/20 backdrop-blur-md p-4 rounded-xl border border-gray-800/60 card-glow group/card">
                            <div class="flex justify-between items-start mb-2">
                                <span class="text-[10px] font-mono text-gray-500 uppercase tracking-wider" data-key="ip">Public IP</span>
                                <i class="fa-solid fa-globe text-gray-600 group-hover/card:text-blue-400 transition-colors"></i>
                            </div>
                            <div id="display-ip" class="text-xl font-bold text-gray-700 font-mono break-all leading-tight mt-1">--</div>
                            <div id="display-isp" class="text-[10px] text-gray-500 mt-2 truncate opacity-70">Detecting...</div>
                        </div>

                        <!-- Stat 3: Graphics -->
                        <div class="bg-black/20 backdrop-blur-md p-4 rounded-xl border border-gray-800/60 card-glow group/card">
                            <div class="flex justify-between items-start mb-2">
                                <span class="text-[10px] font-mono text-gray-500 uppercase tracking-wider" data-key="graphics">Graphics</span>
                                <i class="fa-solid fa-layer-group text-gray-600 group-hover/card:text-green-400 transition-colors"></i>
                            </div>
                            <div id="display-gl" class="text-xl font-bold text-gray-700">--</div>
                            <div class="text-[10px] text-gray-500 mt-2 opacity-70">Chart Rendering</div>
                        </div>

                        <!-- Stat 4: Device -->
                        <div class="bg-black/20 backdrop-blur-md p-4 rounded-xl border border-gray-800/60 card-glow group/card">
                            <div class="flex justify-between items-start mb-2">
                                <span class="text-[10px] font-mono text-gray-500 uppercase tracking-wider" data-key="device">Device</span>
                                <i class="fa-solid fa-laptop-code text-gray-600 group-hover/card:text-pink-400 transition-colors"></i>
                            </div>
                            <div id="display-os" class="text-xl font-bold text-gray-700 truncate">--</div>
                            <div id="display-res" class="text-[10px] text-gray-500 mt-2 opacity-70">Resolution</div>
                        </div>
                    </div>

                    <div id="advice-area" class="hidden opacity-0 transform translate-y-4 transition-all duration-500 mb-6"></div>

                </div>
            </div>

            <p class="text-center text-gray-600 text-[10px] font-mono opacity-50">
                SESSION: <span id="session-id">INIT</span> | NODE: ZKSYNC_ERA_MAINNET
            </p>
        </div>
    </main>

    <script>
        // --- DATA & CONFIG ---
        // SỬ DỤNG CACHE BUSTER ĐỂ FIX LỖI IP BỊ CACHE
        const getCacheBuster = () => `?t=${Date.now()}`;
        
        const TARGETS = {
            MAIN: 'https://holdstation.exchange/favicon.ico', 
            BACKUP: 'https://www.google.com/favicon.ico',
            IP_API_1: 'https://api.db-ip.com/v2/free/self',
            IP_API_2: 'https://api.ipify.org?format=json'
        };

        const LANG = {
            vi: {
                title: "Kiểm tra hệ thống",
                desc: "Phân tích độ trễ mạng, cấu hình thiết bị và kết nối tới máy chủ Trading.",
                startBtn: '<i class="fa-solid fa-radar"></i> Bắt đầu kiểm tra',
                retryBtn: '<i class="fa-solid fa-rotate"></i> Kiểm tra lại',
                latency: "Độ trễ (Ping)",
                ip: "IP Công khai",
                graphics: "Đồ họa",
                device: "Thiết bị",
                ready: "Sẵn sàng",
                scanning: "Đang quét...",
                resolving: "Đang lấy IP...",
                pinging: "Đang kết nối...",
                complete: "Hoàn tất",
                status_good: "Kết nối Tuyệt vời",
                status_fair: "Kết nối Ổn định",
                status_bad: "Mạng Quá Chậm",
                advice_offline: "Mất kết nối Internet",
                advice_blocked: "Kết nối bị chặn (Firewall)",
                advice_webgl: "Thiếu hỗ trợ WebGL",
                advice_good: "Hệ thống tối ưu cho Trading",
                advice_fair: "Mạng ổn định để giao dịch",
                advice_bad: "Ping quá cao! Không nên giao dịch"
            },
            en: {
                title: "System Health Check",
                desc: "Analyze network latency, device configuration, and connection to Trading servers.",
                startBtn: '<i class="fa-solid fa-radar"></i> Start Diagnostic',
                retryBtn: '<i class="fa-solid fa-rotate"></i> Scan Again',
                latency: "Latency",
                ip: "Public IP",
                graphics: "Graphics",
                device: "Device",
                ready: "Ready",
                scanning: "Analyzing...",
                resolving: "Resolving IP...",
                pinging: "Pinging Server...",
                complete: "Complete",
                status_good: "Excellent Connection",
                status_fair: "Stable Connection",
                status_bad: "High Latency Warning",
                advice_offline: "No Internet Connection",
                advice_blocked: "Connection Blocked (Firewall)",
                advice_webgl: "WebGL Not Supported",
                advice_good: "System Optimized for Trading",
                advice_fair: "Connection Stable for Trading",
                advice_bad: "Lag detected! Trading risk is high"
            }
        };

        let currentLang = 'en';
        let isScanning = false;
        const sessionId = Math.random().toString(36).substring(7).toUpperCase();
        document.getElementById('session-id').innerText = sessionId;

        // --- INIT ---
        window.onload = async () => {
            // Auto-detect Language
            try {
                // Thêm cache: no-store để không bị lưu IP cũ
                const res = await fetch(TARGETS.IP_API_1 + getCacheBuster(), { cache: 'no-store' });
                if(res.ok) {
                    const data = await res.json();
                    if(data.countryCode === 'VN' || data.countryName === 'Vietnam') {
                        setLang('vi');
                    }
                }
            } catch(e) {}
            
            setTimeout(startScan, 800);
        };

        // --- CORE FUNCTIONS ---
        
        function forceLang(lang) {
             const toggle = document.getElementById('lang-toggle');
             toggle.checked = (lang === 'vi');
             setLang(lang);
        }

        function setLang(lang) {
            currentLang = lang;
            const t = LANG[lang];
            
            // Update Toggle UI Sync
            const toggle = document.getElementById('lang-toggle');
            toggle.checked = (lang === 'vi');
            
            // Update Text Elements
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                if(t[key]) el.innerHTML = t[key];
            });

            // Update Dynamic Elements
            const btnScan = document.getElementById('btn-scan');
            if(!isScanning && document.getElementById('display-ping').innerText !== '--') {
                 btnScan.innerHTML = `<span class="relative z-10 flex items-center justify-center gap-2">${t.retryBtn}</span>`;
            } else if (!isScanning) {
                 btnScan.innerHTML = `<span class="relative z-10 flex items-center justify-center gap-2">${t.startBtn}</span>`;
            }

            // Update Status Text
            const statusText = document.getElementById('status-text');
            if(statusText.innerText !== '...') {
               if(statusText.getAttribute('data-state') === 'ready') statusText.innerText = t.ready;
               if(statusText.getAttribute('data-state') === 'complete') statusText.innerText = t.complete;
            }
        }

        document.getElementById('lang-toggle').addEventListener('change', (e) => {
            setLang(e.target.checked ? 'vi' : 'en');
        });

        async function startScan() {
            if (isScanning) return;
            isScanning = true;
            const t = LANG[currentLang];

            resetUI();
            
            // UI Animations
            document.getElementById('progress-container').classList.remove('hidden');
            const scanner = document.getElementById('scanner');
            scanner.classList.remove('hidden');
            
            // CSS Animation Fallback for JS
            const styleSheet = document.createElement("style");
            styleSheet.innerText = `
                @keyframes scan-down {
                    0% { top: 0; opacity: 0; }
                    20% { opacity: 1; }
                    80% { opacity: 1; }
                    100% { top: 100%; opacity: 0; }
                }
            `;
            document.head.appendChild(styleSheet);
            scanner.style.animation = 'scan-down 2s ease-in-out infinite';

            updateStatus('scanning', t.scanning);
            
            // --- STEP 1: DEVICE (0-30%) ---
            setBar(10);
            await delay(300);
            
            // WebGL
            const canvas = document.createElement('canvas');
            const gl = canvas.getContext('webgl');
            const glStatus = gl ? 'Active' : 'N/A';
            const glColor = gl ? 'text-hs-success' : 'text-hs-danger';
            animateValue(document.getElementById('display-gl'), glStatus, glColor);
            
            // OS
            const os = getOS();
            document.getElementById('display-os').innerText = os;
            document.getElementById('display-os').className = "text-xl font-bold text-white truncate";
            document.getElementById('display-res').innerText = `${window.screen.width}x${window.screen.height}`;
            setBar(30);

            // --- STEP 2: NETWORK IP (30-60%) ---
            updateStatus('scanning', t.resolving);
            let ipInfo = await getIP();
            
            const ipEl = document.getElementById('display-ip');
            ipEl.innerText = ipInfo.ip;
            ipEl.className = "text-xl font-bold text-white font-mono break-all leading-tight mt-1";
            document.getElementById('display-isp').innerText = ipInfo.isp;
            setBar(60);

            // --- STEP 3: LATENCY (60-90%) ---
            updateStatus('scanning', t.pinging);
            let pingResult = await checkPing();
            
            const pingEl = document.getElementById('display-ping');
            pingEl.innerText = `${pingResult.ms}ms`;
            
            let pingClass = "text-hs-danger";
            // Logic Ping: <150 Good, <500 Fair, >500 Bad
            if (pingResult.status === 'good') pingClass = "text-hs-success text-shadow-glow";
            else if (pingResult.status === 'fair') pingClass = "text-hs-warning";
            else pingClass = "text-hs-danger animate-pulse"; // Hiệu ứng cảnh báo cho ping cao
            
            pingEl.className = `text-3xl font-bold font-mono ${pingClass}`;
            setBar(90);
            await delay(600);

            // --- FINISH ---
            setBar(100);
            updateStatus('complete', t.complete);
            
            showAdvice(pingResult.status, gl, ipInfo.ip);
            
            // Cleanup
            setTimeout(() => {
                document.getElementById('progress-container').classList.add('hidden');
                scanner.classList.add('hidden');
                
                const btnScan = document.getElementById('btn-scan');
                btnScan.innerHTML = `<span class="relative z-10 flex items-center justify-center gap-2">${t.retryBtn}</span>`;
                
                isScanning = false;
            }, 500);
        }

        // --- HELPER LOGIC ---

        async function getIP() {
            // FIX IP CACHE: Thêm query param random thời gian
            const cacheBuster = getCacheBuster();
            
            try {
                const res = await fetch(TARGETS.IP_API_1 + cacheBuster, { cache: 'no-store' });
                if(res.ok) {
                    const data = await res.json();
                    return { ip: data.ipAddress, isp: `${data.city}, ${data.countryCode}` };
                }
            } catch(e) {}
            
            // Fallback
            try {
                const res = await fetch(TARGETS.IP_API_2 + "&" + cacheBuster.replace('?', ''), { cache: 'no-store' });
                const data = await res.json();
                return { ip: data.ip, isp: 'ISP Info Hidden' };
            } catch(e) {
                return { ip: 'Hidden', isp: 'AdBlock Detected' };
            }
        }

        async function checkPing() {
            const start = performance.now();
            let status = 'error';
            let ms = 999;
            try {
                await fetch(TARGETS.MAIN, { mode: 'no-cors', cache: 'no-store' });
                ms = Math.round(performance.now() - start);
                
                // Logic đánh giá Ping chặt chẽ hơn
                if (ms < 150) status = 'good';
                else if (ms < 500) status = 'fair';
                else status = 'bad'; // Thêm trạng thái Bad cho ping cao
            } catch (e) {
                try {
                    await fetch(TARGETS.BACKUP, { mode: 'no-cors', cache: 'no-store' });
                    status = 'blocked'; ms = 'ERR';
                } catch (err) {
                    status = 'offline'; ms = 'OFF';
                }
            }
            return { ms, status };
        }

        function showAdvice(pingStatus, gl, ip) {
            const box = document.getElementById('advice-area');
            const t = LANG[currentLang];
            let html = '';
            let style = '';

            // Map status to messages - Đã thêm logic cho BAD status
            if (pingStatus === 'offline') {
                style = 'bg-red-900/20 border-red-500/30 text-red-200';
                html = makeAdviceHtml('fa-plug', t.advice_offline, 'text-red-500');
            } else if (pingStatus === 'blocked') {
                style = 'bg-orange-900/20 border-orange-500/30 text-orange-200';
                html = makeAdviceHtml('fa-shield-cat', t.advice_blocked, 'text-orange-500');
            } else if (!gl) {
                style = 'bg-yellow-900/20 border-yellow-500/30 text-yellow-200';
                html = makeAdviceHtml('fa-tv', t.advice_webgl, 'text-yellow-500');
            } else if (pingStatus === 'good') {
                style = 'bg-emerald-900/20 border-emerald-500/30 text-emerald-200';
                html = makeAdviceHtml('fa-check-circle', t.advice_good, 'text-emerald-500');
            } else if (pingStatus === 'bad') {
                // Trường hợp mạng lag > 500ms
                style = 'bg-red-900/20 border-red-500/50 text-red-200';
                html = makeAdviceHtml('fa-triangle-exclamation', t.advice_bad, 'text-red-500');
            } else {
                // Fair: 150ms < ping < 500ms
                style = 'bg-blue-900/20 border-blue-500/30 text-blue-200';
                html = makeAdviceHtml('fa-wifi', t.advice_fair, 'text-blue-500');
            }

            box.innerHTML = html;
            box.className = `p-4 rounded-xl border ${style} backdrop-blur-md mb-6 animate-pulse-fast`;
            box.classList.remove('hidden', 'opacity-0', 'translate-y-4');
            setTimeout(() => box.classList.remove('animate-pulse-fast'), 2000);
        }

        function makeAdviceHtml(icon, text, colorClass) {
            return `<div class="flex items-center gap-4">
                        <div class="p-2 rounded-full bg-black/20 ${colorClass}">
                            <i class="fa-solid ${icon} text-xl"></i>
                        </div>
                        <div>
                            <strong class="block text-sm font-bold uppercase tracking-wide opacity-90">${text}</strong>
                        </div>
                    </div>`;
        }

        function resetUI() {
            document.getElementById('advice-area').classList.add('hidden');
            document.getElementById('btn-scan').innerHTML = '<i class="fa-solid fa-circle-notch fa-spin"></i> ...';
        }

        function updateStatus(state, text) {
            const dot = document.getElementById('status-dot');
            const ping = document.getElementById('status-ping');
            const label = document.getElementById('status-text');
            
            label.setAttribute('data-state', state);
            label.innerText = text;

            if (state === 'scanning') {
                dot.className = "relative inline-flex rounded-full h-2 w-2 bg-yellow-500";
                ping.className = "animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75";
            } else {
                dot.className = "relative inline-flex rounded-full h-2 w-2 bg-green-500";
                ping.className = "hidden";
            }
        }

        function setBar(percent) { document.getElementById('progress-bar').style.width = percent + '%'; }
        function delay(ms) { return new Promise(res => setTimeout(res, ms)); }
        function animateValue(obj, val, color) { obj.innerText = val; obj.className = `text-xl font-bold ${color}`; }
        
        function getOS() {
            const ua = navigator.userAgent;
            if (/android/i.test(ua)) return "Android";
            if (/iPad|iPhone|iPod/.test(ua)) return "iOS";
            if (/windows phone/i.test(ua)) return "Windows Phone";
            if (/Win/.test(ua)) return "Windows";
            if (/Mac/.test(ua)) return "MacOS";
            if (/Linux/.test(ua)) return "Linux";
            return "Unknown";
        }
    </script>
</body>
</html>
